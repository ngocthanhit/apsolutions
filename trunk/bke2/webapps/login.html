<%
   
   ServletContext context = this.getServletContext();	
	String applicationName1 = context.getInitParameter( "applicationName" );
	
%>



<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Login Page</title>
  
  <!-- code added for browser compatibility starts here-->
    <link rel="stylesheet" type="text/css" href="css/IndDesign.css" />
    <script type="text/javascript" src="js/IndJavaScript.js"></script>
  <!-- code added for browser compatibility end here-->
  
  
	<script type="text/javascript" src="js/actb.js"></script>
	<script type="text/javascript" src="js/common.js"></script>
	<script type="text/javascript">

 
  

	//var applicationName = document.getElementById('applicationName').value;
	var applicationName = "bes8a4tgg";


function getCookie(Name){ //get cookie value
	var re=new RegExp(Name+"=[^;]+", "i"); //construct RE to search for target name/value pair
	if (document.cookie.match(re)) //if cookie found
	return document.cookie.match(re)[0].split("=")[1] //return its value
	return ""
}

function setCookie(name, value, days){ //set cookie value
	var expireDate = new Date()
	//set "expstring" to either future or past date, to set or delete cookie, respectively
	var expstring=expireDate.setDate(expireDate.getDate()+parseInt(days))
	document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/";
}
  function returnQ(){

  	window.location = "https://docorganiz.quickbase.com/db/"+applicationName;
	}

  //code for browser compatibility changed the function name from returnAC tp returnACNew
  function returnACNew(){
    //alert('Hello');

	
	document.loginForm.submit(); //code for browser compatibility

	//pausecomp(500);
	//	document.loginForm.submit();

	//document.loginForm.submit();
	//document.this.submit();
	//return true;
	}


var resolutionArray = new Array(6);
resolutionArray[0] ="XGA Dual";
resolutionArray[1] ="SXGA Dual";
resolutionArray[2] ="Large";
resolutionArray[3] ="Widescreen(1280X800)";
resolutionArray[4] ="Widescreen(1440X900)";
resolutionArray[5] ="Widescreen(1680X1050)";
resolutionArray[6] ="Widescreen(1920X1200)";

var imageHArray = new Array(6);
imageHArray[0] ="1024";
imageHArray[1] ="1280";
imageHArray[2] ="800";
imageHArray[3] ="1280";
imageHArray[4] ="1440";
imageHArray[5] ="1680";
imageHArray[6] ="1920";


var imageVArray = new Array(6);
imageVArray[0] ="768";
imageVArray[1] ="1024";
imageVArray[2] ="1200";
imageVArray[3] ="800";
imageVArray[4] ="900";
imageVArray[5] ="1050";
imageVArray[6] ="1200";


	function setVar(){
	  //alert('IN SET VAR')
	     var obj11 = actb(document.getElementById('image'), resolutionArray);
		 obj11.actb_lim = 5;
		// obj11.actb_firstText = true;
		 obj11.actb_mouse = true;
	  }


	var imageResolutionArray = new Array(resolutionArray,imageHArray, imageVArray);

	function fillResolution(svn)
	{
		if(svn != null){
	       for (i in imageResolutionArray) {
		   		  for (j in imageResolutionArray[i]) {
				  	  	 //alert('Found '+pcdivArray[0][j]);
        			   	  if (imageResolutionArray[0][j] == svn.value){
            		   	  	 //alert('Found '+svn.value+'found value of Div'+imageResolutionArray[1][j]);
							 //aa.value=pcdivArray[1][j];
							 //aa.innerHTML=imageResolutionArray[1][j];
							 document.getElementById('imageH').value=imageResolutionArray[1][j];
							 document.getElementById('imageV').value=imageResolutionArray[2][j];
							 }
				 }
			}
	  	}
	}



	function initialize(){


		if(document.getElementById('login').value.length>2){
			document.getElementById('loginButton').focus();
		}else{
			document.getElementById('login').focus();
		}
		//alert('Hello'+document.getElementById('login').value.length);
		if (getCookie("image")!=""){
					var imageVar = getCookie("image").replace("\"", "");
					document.getElementById('image').value = imageVar.replace("\"", "");
					}
		if (getCookie("imageH")!="")
					document.getElementById('imageH').value = getCookie("imageH").replace("\"", "");
		if (getCookie("imageV")!="")
							document.getElementById('imageV').value = getCookie("imageV").replace("\"", "");

		if (getCookie("lastImageLocation")!=""){
			//alert('lastImageLocation '+getCookie("lastImageLocation"));
			document.loginForm.lastImageLocation.value = getCookie("lastImageLocation");
		}



	}

	function removeFileName(svr){

	//alert('svr '+svr);
	if( (svr!='')||(svr!=null) ){
		var fullLenth = svr.length;
		var pdfString = svr.substring(fullLenth-4, fullLenth)
		//alert('pdfString '+pdfString);
		if(pdfString==".pdf"){
			var pdfDirArray = svr.split('\\');
			var tempDir="";
				for(var i=0; i<(pdfDirArray.length-1);i++){
					//alert('i '+i+' aray value '+pdfDirArray[i]);
					tempDir = tempDir+pdfDirArray[i]+"\\";
				}
				//alert('tempDir '+tempDir);
				document.getElementById('lastImageLocation').value = tempDir;
				setCookie('lastImageLocation',tempDir,365);

		}

	}

	}

function pausecomp(millis)
{
	var date = new Date();
	var curDate = null;

	do { curDate = new Date(); }
	while(curDate-date < millis);
}


</script>
</head>
<body onload='initialize();'>
 <!-- code added for browser compatibility starts here-->
       <div id="logo_bar">	  
	 	<div id="logo_image"></div>
	</div>
	
	<div id="nav_bar"></div>	 
	<div id="sign_lab">Sign In</div>
    
    <div id="content_body" align="center">
    <div id="ind_error_msg"><%=msg%></div>
    <div id="Signin_outln_div" align="center">
  <!-- code added for browser compatibility ends here-->
  
   
<FORM METHOD="POST" name="loginForm" action="login.jsp">
  <!-- code added for browser compatibility starts here-->
    <div id="Signin_div" align="center">
		<label>Login:</label>
		<INPUT TYPE="text" NAME='login'  ID='login' style="width:270px;" value='<%=cookieuid1+"@"+cookieuid2%>'  size="45" maxlength="45" ></INPUT>
	
		<label>Password:</label>
		<INPUT TYPE="password" NAME="password" id="password" style="width:270px;" value='<%=cookiepassword%>' ></INPUT>
		
		<label>Image Window Resolution:</label>
		<INPUT TYPE='text' NAME='image'  ID='image' style="width:270px;" value="<%=cookieimage%>" onfocus=setVar() onblur=fillResolution(this) size='56' maxlength='56' ></INPUT>
	
		<label>Select Image File Folder:</label>		
			<INPUT TYPE='text' NAME='lastImageLocation'  ID='lastImageLocation' style="width:200px; display:none;"  value="<%=cookielastImageLocation%>"  onChange=document.getElementById('lastImageLocation').value=this.value; ></INPUT>
			
			<input type=file id="browse_ind" name=browse style="width:270px; display: block;"/>
			
			<button id="browse_bnt" class="button_brw" style="display: none;" onClick="browse.click();lastImageLocation.value=browse.value;removeFileName(document.getElementById('lastImageLocation').value);"  value="Browse">Browse</button>
			<button id="loginButton" class="button" name="loginButton" type="button" onClick="returnAC();" value="Login">Login</button>
     		<button  id="return_bnt" class="button" name="return" onClick="returnQ()">Return</button>
		
     </div>
   <!-- code added for browser compatibility ends here-->
	<INPUT TYPE="hidden" name="u" VALUE="<%=request.getParameter("u")%>"></INPUT>
	<INPUT TYPE="hidden" name="ac" VALUE="<%=request.getParameter("ac")%>"></INPUT>
	<INPUT TYPE="hidden" name="vid" VALUE="<%=request.getParameter("vid")%>"></INPUT>
	<INPUT TYPE="hidden" name="lac" id="lac" value=""></INPUT>
	<INPUT TYPE="hidden" NAME="imageH"  ID="imageH" value="<%=cookieimageH%>"  size="5" maxlength="5" ></INPUT>
	<INPUT TYPE="hidden" NAME="imageV"  ID="imageV" value="<%=cookieimageV%>"  size="5" maxlength="5" ></INPUT>
						<input type="hidden" name="st" id="st" value="<%=st%>">
						<input type="hidden" name="cid" id="cid" value="<%=cid%>">
	<INPUT TYPE="hidden" NAME="applicationName"  ID="applicationName" value="<%=applicationName1%>"  size="5" maxlength="5" ></INPUT>


</FORM>
	<!-- code added for browser compatibility starts here-->	  
	</div>
	</div>
	   <div id="footer_des">
	     Copyright 2010 by DocOrganiz Corporation. All Rights Reserved.      
	   </div>	     
	  <!-- code added for browser compatibility ends here-->
</body>
</html>
